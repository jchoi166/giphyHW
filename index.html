<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Giphy API</title>
    <link href='https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css' rel='stylesheet' integrity='sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB'
        crossorigin='anonymous'>
</head>

<body>

    <div class="container-fluid">
        <div class="row">
            <div id="categories"></div>
        </div>

        <div class="row">
            <div class="col-md-6" id = "images-view">hello</div>
            <div class="col-md-6">hello</div>
        </div>

    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">


        var vgArray = ["Fortnite", "PUBG", "CS:GO", "Rainbow Six: Seige", "League of Legends", "Dota 2", "World of Warcraft", "Overwatch"]
        var apiKey = "zeKh1hQY0TDUN2mZFRJkmePDHKRO27kD"
        var game = $(this).attr("data-name")
        var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + game + "&limit=10&api_key=" + apiKey

        function createButtons() {

            vgArray.forEach(function (i) {
                var a = $("<button>");
                a.addClass("game-button");
                a.attr("data-name", i);
                a.text(i);
                $("#categories").append(a);
            })
        }
        function displayInfo() {

            $.get(queryURL)

                .then(function (r) {
                    r.data.forEach(function(d){
                    // Creating a div to hold the movie
                    var movieDiv = $("<div class='game'>");

                    // Storing the rating data
                    var rated = d.rating;

                    // Creating an element to have the rating displayed
                    var pOne = $("<p>").text("Rating: " + rated);

                    // Displaying the rating
                    movieDiv.append(pOne);

                    // Retrieving the URL for the image
                    var imgURL = d.images.original.url;

                    // Creating an element to hold the image
                    var image = $("<img>").attr("src", imgURL);

                    // Appending the image
                    movieDiv.append(image);

                    // Putting the entire movie above the previous movies
                    $("#images-view").prepend(movieDiv);
                    })
                

                })
                .catch(function (e) {
                    console.log("Error")
                    console.log(e)
                })

        }

        $(document).on("click", ".game-button", displayInfo);


        createButtons()
    </script>

</body>

</html>